You are an expert Flutter / Dart / Supabase engineer.

###############################################################
#       PROJECT CONTEXT  (panic_button_flutter repo)
###############################################################
â€¢ Flutter app â†’ Riverpod, Freezed, GoRouter, null-safety.
â€¢ Supabase backend already has all breathing tables **plus** this new field:


Existing rows were back-filled (`recommended_minutes = total_minutes`).

â€¢ UX change: user must choose 1â€“30 min session length.  
  Default = routine.recommended_minutes (fallback 4).

Layout reference:
```
PanicButton
   ğŸ”µ  animated circle  (â€œPresiona para comenzarâ€ when idle)
      03:00
[DuraciÃ³n: 4 min]   [Otros Ejercicios]
```

When clicking the [Otros Ejercicios] it opens a menu with the following layout: 
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  UI SPEC â–¸ â€œOtros ejerciciosâ€ bottom-sheet
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Trigger:
â€¢ Three-dot button on Breath Screen opens `showModalBottomSheet` with
  `useSafeArea: true` and `shape: RoundedRectangleBorder(
     borderRadius: BorderRadius.vertical(top: Radius.circular(20)))`.

Header:
â€¢ Slim drag-handle (`Container(height:4, width:40, â€¦)`).
â€¢ Title **â€œSet the paceâ€** â€“ `TextStyle(fontSize:22, fontWeight:w600)`.

Goal tabs:
â€¢ Horizontally scrollable `ChoiceChip` (Kids, Resonance, Focusing,
  Energizing, Calming, Grounding).  
â€¢ Use `selectedColor` = theme.primary, `backgroundColor` = Colors.grey.shade800.
â€¢ Selecting a chip reloads `routinesForGoalProvider`.

Pattern picker:
â€¢ Below chips, list of routines for the selected goal.
  `ListTile` layout:  

Animations:
â€¢ Use `FadeTransition` when overlaying lock.
â€¢ Sheet pops up with `animationDuration: 300 ms, curve: Curves.easeOut`.

State changes on â€œSaveâ€:
1. `selectedRoutineProvider â† routine`
2. `selectedDurationProvider â† routine.recommendedMinutes`
3. `Navigator.pop(context)`

###############################################################
#       DELIVERABLES  â€“ generate **exactly 9 files** in order
###############################################################
1. **lib/models/breath_models.dart**  
   â€¢ Freezed + json_serializable for: StepModel, PatternModel,
     PatternStepModel, RoutineItemModel, RoutineModel (add
     `recommendedMinutes`), GoalModel, ExpandedStep (plain).

2. **lib/data/breath_repository.dart**  
   â€¢ Supabase helpers:  
     â€“ `getRoutinesByGoal(String slug)`  
     â€“ `expandRoutine(String id,{required int targetMinutes})`
       (scales repetitions client-side).  
     â€“ `logRoutineRun(String routineId,int targetMinutes)`
       (upsert user_routine_status, set total_minutes = targetMinutes).

3. **lib/providers/breathing_providers.dart**  
   â€¢ Providers: supabase, goals, selectedRoutine, selectedDuration (int),
     expandedSteps.

4. **lib/providers/breathing_playback_controller.dart**  
   â€¢ Notifier with currentStep, secondsRemaining, start/pause/reset.
     Stops when elapsed â‰¥ selectedDuration Ã— 60.

5. **lib/widgets/breath_circle.dart**  
   â€¢ Animated scale / opacity widget driven by playback_controller.

6. **lib/widgets/duration_selector_button.dart**  
   â€¢ Pill button â†’ bottom-sheet with `CupertinoSlider` (1-10 min);
     updates selectedDurationProvider.

7. **lib/widgets/goal_routine_sheet.dart**  
   â€¢ Bottom-sheet with Goal chips + routines list.
     On tap âœ set selectedRoutine & selectedDuration, pop.

8. **lib/screens/breath_screen.dart**  
   â€“ Compose:
   - AppBar title
   - BreathCircle
   - Countdown Text('${minutesRemaining}:${secRemaining}')
   - Row: [MinutesSliderButton] [OpenGoalPatternSheetButton]
   - Play/Pause FAB

9. **supabase/migrations/{{timestamp}}_add_recommended_minutes.sql**  
   ```sql
   BEGIN;
   ALTER TABLE routines
   ADD COLUMN IF NOT EXISTS recommended_minutes int;
   UPDATE routines
   SET recommended_minutes = total_minutes
   WHERE recommended_minutes IS NULL;
   COMMIT;
   ```

###############################################################
#       CODING RULES
###############################################################
â€¢ Use null-safety, ES imports, proper file headers.  
â€¢ Read Supabase creds via  
  `const supabaseUrl  = String.fromEnvironment('SUPABASE_URL');`  
  `const supabaseKey  = String.fromEnvironment('SUPABASE_ANON_KEY');`  
  (already passed via â€“dart-define).  
â€¢ No tests or mocks required.  
â€¢ Each file must be compilable.  
â€¢ Output **exactly nine fenced code blocks in the order above** â€“  
  no commentary before, between, or after.

###############################################################
#       LETâ€™S BUILD! ğŸš€
###############################################################
```